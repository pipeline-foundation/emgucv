name: CodeQL Analysis

on:
  push:
  pull_request:
  schedule:
    - cron: '0 8 * * *'

jobs:
  analyze:
    name: CodeQL Analysis
    runs-on: windows-latest
    steps:
      - name: Add msbuild to PATH
        uses: microsoft/setup-msbuild@v1.0.2

      - name: Check msbuild version
        run: |
          msbuild

      # - name: Configure Pagefile
      #   id: config_pagefile
      #   uses: al-cheb/configure-pagefile-action@v1.2
      #   with:
      #       minimum-size: 8GB
      #       maximum-size: 32GB
      #       disk-root: "D:"

      # - name: Clean .NET cache
      #   id: clean_dotnet_cache
      #   shell: pwsh
      #   run: |
      #     dotnet clean .\Solution\Windows.Desktop\Emgu.CV.sln --configuration Release
      #     dotnet nuget locals all --clear

      # - name: Checkout repository
      #   id: checkout_repo
      #   uses: actions/checkout@v2
      #   with:
      #     token: ${{ secrets.GITHUB_TOKEN }}

      # - name: Check out submodules
      #   id: checkout_submodules
      #   run: |
      #     git submodule update --init --recursive

      # - name: Initialize CodeQL
      #   id: init_codeql
      #   uses: github/codeql-action/init@v1
      #   # with:
      #   #   queries: security-and-quality

      # - name: Build native binary
      #   id: build_native_binary
      #   run: |
      #     .\platforms\windows\Build_Binary_x86-64_doc.bat

      # - name: Build Emgu solution
      #   id: build_solution
      #   run: |
      #     msbuild Emgu.CV.sln -p:Configuration=Release -p:Platform=x64 -target:Restore
      #     msbuild Emgu.CV.sln -p:Configuration=Release -p:Platform=x64

      # - name: Perform CodeQL Analysis
      #   id: analyze_codeql
      #   uses: github/codeql-action/analyze@v1

# Built with ‚ù§ by [Pipeline Foundation](https://pipeline.foundation)